<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KOBAKOV Kombat: Fight for 100 ping</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; -webkit-tap-highlight-color:transparent; }
html, body { height:100%; width:100%; font-family:"Segoe UI", Arial, sans-serif; color:#fff; background:#1e1f22; overflow:hidden; user-select:none; }
button, div { outline:none; -webkit-focus-ring-color:transparent; }

/* LOADING SCREEN */
#loading { position:fixed; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; z-index:10; overflow:hidden; }
.loading-bg { position:absolute; top:0; left:0; width:100%; height:100%; background:url('kobakov.png') center center / cover no-repeat; z-index:0; }
.loading-frame { position:absolute; bottom:0; left:0; width:100%; height:50%; background: rgba(32,34,37,0.95); border-top-left-radius:50px; border-top-right-radius:50px; box-shadow: 0 -20px 50px rgba(0,0,0,0.6); display:flex; flex-direction:column; align-items:center; justify-content:flex-end; padding-bottom:40px; z-index:1; }
#loadingTitle { color:#fff; font-size:2em; font-weight:bold; margin-bottom:20px; text-align:center; }
.spinner { border:8px solid #333; border-top:8px solid #fff; border-radius:50%; width:80px; height:80px; margin-bottom:15px; animation:spin 1s linear infinite; }
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
#loadingText { color:#fff; font-size:1.5em; text-align:center; margin-bottom:10px; }

/* MAIN GAME */
#main { width:100%; height:100%; display:none; }
.titleBar { position:fixed; top:0; left:0; width:100%; height:60px; background: rgba(32,34,37,0.95); display:flex; align-items:center; justify-content:center; font-size:22px; font-weight:600; color:#fff; border-bottom:1px solid #2b2d31; z-index:5; }
.screen { position:absolute; top:60px; left:0; width:100%; height:calc(100% - 120px); display:none; flex-direction:column; align-items:center; justify-content:center; transition:opacity 0.3s; overflow-y:auto; padding:10px; }
.screen.active { display:flex; }
#clickCounter { font-size:28px; margin-bottom:20px; z-index:1; }
#circleBtn { width:150px; height:150px; border-radius:50%; background-color:#2b2d31; display:flex; align-items:center; justify-content:center; color:#fff; font-size:20px; cursor:pointer; transition: transform 0.3s ease, background 0.3s ease; position:relative; }
#circleBtn:active { transform:scale(0.9); background-color:#3a3d43; }

/* BOTTOM BAR */
#bottomBar { position:fixed; bottom:0; left:0; width:100%; background: rgba(32,34,37,0.85); display:flex; justify-content:space-around; align-items:center; height:60px; border-top:1px solid #2b2d31; z-index:5; }
.navBtn { flex:1; text-align:center; color:#b9bbbe; font-size:18px; cursor:pointer; transition:color 0.3s; }
.navBtn.active { color:#5865F2; }

/* UPGRADES */
.upgrade-box { background: rgba(32,34,37,0.85); border:1px solid #2b2d31; border-radius:15px; padding:15px; margin-bottom:15px; width:90%; max-width:400px; display:flex; flex-direction:column; align-items:flex-start; }
.upgrade-box h3 { margin-bottom:5px; color:#fff; }
.upgrade-box p { margin-bottom:10px; color:#ccc; font-size:0.9em; }
.upgrade-box button { background:#5865F2; color:#fff; border:none; padding:8px 12px; border-radius:10px; cursor:pointer; transition:background 0.3s; }
.upgrade-box button:disabled { background:#3a3d43; cursor:not-allowed; }

/* BATTLE OVERLAY */
#battleOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95); display:none; flex-direction:column; align-items:center; justify-content:center; z-index:20; }
#battleCounter { font-size:28px; margin-bottom:20px; color:#fff; }
#battleTimer { font-size:22px; margin-bottom:20px; color:#fff; }
#circleBtnBattle { width:150px; height:150px; border-radius:50%; background:#5865F2; display:flex; align-items:center; justify-content:center; font-size:20px; cursor:pointer; color:#fff; }
#circleBtnBattle:active { transform:scale(0.9); }

/* BATTLE LIST */
.battle-box { background: rgba(32,34,37,0.85); border:1px solid #2b2d31; border-radius:15px; padding:15px; margin-bottom:15px; width:90%; max-width:400px; display:flex; flex-direction:column; align-items:flex-start; }
.battle-box h3 { color:#fff; margin-bottom:5px; }
.battle-box p { color:#ccc; margin-bottom:10px; }
.battle-box button { background:#5865F2; color:#fff; border:none; padding:8px 12px; border-radius:10px; cursor:pointer; transition:background 0.3s; }
.battle-box button:disabled { background:#3a3d43; cursor:not-allowed; }
</style>
</head>
<body>

<!-- LOADING -->
<div id="loading">
  <div class="loading-bg"></div>
  <div class="loading-frame">
    <div id="loadingTitle">KOBAKOV Kombat: Fight for 100 ping</div>
    <div class="spinner"></div>
    <div id="loadingText">Loading...</div>
  </div>
</div>

<!-- MAIN GAME -->
<div id="main">
  <div class="titleBar" id="titleText">ðŸ’¥ Clicker</div>

  <!-- Click Screen -->
  <div class="screen active" id="clickScreen">
    <div id="clickCounter">Clicks: 0</div>
    <div id="circleBtn">Click</div>
  </div>

  <!-- Battles Screen -->
  <div class="screen" id="battlesScreen">
    <div id="battlesContainer"></div>
  </div>

  <!-- Upgrades -->
  <div class="screen" id="upgradeScreen">
    <div class="upgrade-box">
      <h3>Upgrade Click</h3>
      <p>Increase your click power by +1 per click.</p>
      <button id="upgrade1">Upgrade +1</button>
    </div>
    <div class="upgrade-box">
      <h3>Super Click</h3>
      <p>Increase your click power by +3 per click.</p>
      <button id="upgrade2">Upgrade +3</button>
    </div>
  </div>

  <!-- Bottom Bar -->
  <div id="bottomBar">
    <div class="navBtn" id="btnBattles">Battles</div>
    <div class="navBtn active" id="btnClick">Click</div>
    <div class="navBtn" id="btnUpgrade">Upgrade</div>
  </div>
</div>

<!-- Fullscreen Battle Overlay -->
<div id="battleOverlay">
  <div id="battleCounter">Clicks: 0 / 100</div>
  <div id="battleTimer">Time Left: 30s</div>
  <div id="circleBtnBattle">Click!</div>
</div>

<script>
  // LOADING
  window.addEventListener("load", () => {
    setTimeout(() => {
      document.getElementById("loading").style.opacity = 0;
      setTimeout(() => {
        document.getElementById("loading").style.display = "none";
        document.getElementById("main").style.display = "block";
        initBattles();
      }, 500);
    }, 1500);
  });

  // NAVIGATION
  const navBtns=document.querySelectorAll(".navBtn");
  const screens=document.querySelectorAll(".screen");
  const title=document.getElementById("titleText");
  function showScreen(id,text){screens.forEach(s=>s.classList.remove("active"));document.getElementById(id).classList.add("active");title.textContent=text;}
  function setActiveButton(id){navBtns.forEach(b=>b.classList.remove("active"));document.getElementById(id).classList.add("active");}
  document.getElementById("btnBattles").onclick=()=>{showScreen("battlesScreen","âš”ï¸ Battles"); setActiveButton("btnBattles");};
  document.getElementById("btnClick").onclick=()=>{showScreen("clickScreen","ðŸ’¥ Clicker"); setActiveButton("btnClick");};
  document.getElementById("btnUpgrade").onclick=()=>{showScreen("upgradeScreen","âš™ï¸ Upgrade"); setActiveButton("btnUpgrade");};

  // CLICKER
  const circle=document.getElementById("circleBtn");
  const counter=document.getElementById("clickCounter");
  let clicks=parseInt(localStorage.getItem("clicks")||"0");
  let clickPower=parseInt(localStorage.getItem("clickPower")||"1");
  counter.textContent=`Clicks: ${clicks}`;
  circle.addEventListener("click",()=>{
    clicks+=clickPower;
    counter.textContent=`Clicks: ${clicks}`;
    localStorage.setItem("clicks",clicks);
    circle.style.transform="scale(0.85)";
    setTimeout(()=>circle.style.transform="scale(1)",150);
    updateButtons();
  });

  // UPGRADES
  const upgrades = [
    { id: "upgrade1", baseCost: 10, power: 1, level: 0 },
    { id: "upgrade2", baseCost: 50, power: 3, level: 0 }
  ];
  upgrades.forEach(u => { u.level = parseInt(localStorage.getItem(u.id + "_level") || "0"); });
  function updateButtons() {
    upgrades.forEach(u => {
      const btn = document.getElementById(u.id);
      const cost = u.baseCost * (1 + u.level);
      btn.textContent = `Upgrade +${u.power} Cost: ${cost}`;
      btn.disabled = clicks < cost;
    });
  }
  upgrades.forEach(u => {
    const btn = document.getElementById(u.id);
    btn.addEventListener("click", () => {
      let cost = u.baseCost * (1 + u.level);
      while(clicks >= cost){
        clicks -= cost;
        clickPower += u.power;
        u.level++;
        localStorage.setItem(u.id + "_level", u.level);
        cost = u.baseCost * (1 + u.level);
      }
      counter.textContent = `Clicks: ${clicks}`;
      localStorage.setItem("clicks", clicks);
      localStorage.setItem("clickPower", clickPower);
      updateButtons();
    });
  });
  updateButtons();

  // ----------------- BATTLES -----------------
  const battleOverlay = document.getElementById("battleOverlay");
  const battleCounter = document.getElementById("battleCounter");
  const battleTimer = document.getElementById("battleTimer");
  const circleBtnBattle = document.getElementById("circleBtnBattle");

  let currentBattle = null;
  let battleClicks = 0;
  let battleTime = 0;
  let battleInterval = null;

  const battlesData = [
    { id: "battle1", name:"First Battle", threat:"A small Kobakov minion!", requiredClicks:100, time:30, reward:100 },
    { id: "battle2", name:"Second Battle", threat:"Medium Kobakov warrior!", requiredClicks:200, time:25, reward:250 },
    { id: "battle3", name:"Final Battle", threat:"Kobakov Boss!", requiredClicks:500, time:40, reward:500 }
  ];

  function initBattles(){
    const container = document.getElementById("battlesContainer");
    container.innerHTML = "";
    battlesData.forEach(b => {
      const lastTime = parseInt(localStorage.getItem(b.id+"_time")||"0");
      const now = Date.now();
      const btnDisabled = (now - lastTime) < 24*60*60*1000;
      const remaining = btnDisabled ? Math.ceil((24*60*60*1000 - (now-lastTime))/3600000) : 0;

      const div = document.createElement("div");
      div.className = "battle-box";
      div.innerHTML = `<h3>${b.name}</h3><p>Threat: ${b.threat}</p><button id="${b.id}_btn" ${btnDisabled ? "disabled":""}>Battle</button><p id="${b.id}_status">${btnDisabled ? "Locked. Try in "+remaining+"h":""}</p>`;
      container.appendChild(div);

      const btn = document.getElementById(b.id+"_btn");
      const status = document.getElementById(b.id+"_status");

      btn.addEventListener("click", ()=>{
        startBattle(b, btn, status);
      });
    });
  }

  function startBattle(battleData, btn, statusEl){
    currentBattle = { ...battleData, btn, statusEl };
    battleClicks = 0;
    battleTime = battleData.time;
    battleCounter.textContent = `Clicks: 0 / ${battleData.requiredClicks}`;
    battleTimer.textContent = `Time Left: ${battleTime}s`;
    battleOverlay.style.display = "flex";
    battleInterval = setInterval(()=>{
      battleTime--;
      battleTimer.textContent = `Time Left: ${battleTime}s`;
      if(battleTime<=0){
        clearInterval(battleInterval);
        battleOverlay.style.display="none";
        alert("You failed the battle!");
      }
    },1000);
  }

  circleBtnBattle.addEventListener("click", ()=>{
    if(!currentBattle) return;
    battleClicks++;
    battleCounter.textContent = `Clicks: ${battleClicks} / ${currentBattle.requiredClicks}`;
    if(battleClicks >= currentBattle.requiredClicks){
      clearInterval(battleInterval);
      clicks += currentBattle.reward;
      counter.textContent = `Clicks: ${clicks}`;
      localStorage.setItem("clicks", clicks);
      const now = Date.now();
      localStorage.setItem(currentBattle.id+"_time", now);
      currentBattle.statusEl.textContent = "Completed! Come back in 24h.";
      currentBattle.btn.disabled = true;
      battleOverlay.style.display="none";
      alert(`Victory! You earned ${currentBattle.reward} clicks!`);
      currentBattle = null;
      updateButtons();
    }
  });
</script>
</body>
</html>
